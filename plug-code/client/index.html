<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>LJ subtitle</title>
</head>
<body>
    <h1>使用說明</h1>

    <p>
        <!-- todo: 補上說明內容 -->
        something text in here.
    </p>

    <button id="clone-lewis">lewis</button>
    <button id="clone-kevin">kevin</button>
    <button id="clone-gold">gold</button>

    <p>
        複製位置 <input type="text" id="clone-else-1" /> <button id="clone-else-1">else</button>
    </p>

    <p>
        Input audio at last <input type="text" id="audio-truck-input" value="1" /> truck,
        <br />
        and vc gan audio to last <input type="text" id="audio-truck-vc-input" value="0" /> truck.
    </p>

    <p id="api_server_test">
    </p>
    
    <button onclick="window.start_record()">start record</button>
    <button onclick="window.stop_record()">stop record</button>

    <h2>Add debuger script</h2>
    <p>
        <textarea id="add-debuger-script"></textarea>
    </p>
    <p>
        <button onclick="eval(window['add-debuger-script'].value);">add debuger script</button>
    </p>

    <script type="text/javascript" src="CSInterface.js"></script>
    <script type="text/javascript" src="index.js"></script>
    <script type="text/javascript">
        window.get_request = function (url, execute_function) {
            http = new window.XMLHttpRequest();
            http.overrideMimeType("text/json");
            http.open('GET', url, true);
            http.send();

            http.onreadystatechange = function () {
                if (http.readyState == 4) {
                    try {
                        execute_function(http.responseText);
                    } catch (e) { }
                }
            };
        };

        window.start_record = function () {
            window.get_request("http://127.0.0.1:8000/?start_record", function (r) {
                window.api_server_test.innerText = JSON.parse(r).message;
            });
        };

        window.stop_record = function () {
            window.get_request("http://127.0.0.1:8000/?stop_record", function (r) {
                var v = JSON.parse(r);

                window.api_server_test.innerText = v.message;
                var input_sort = document.getElementById('audio-truck-input').value;
                var input_vc_sort = document.getElementById('audio-truck-vc-input').value;

                var input_function = function (a, b) {
                    var a = a.replace("\\.\\", "\\").split("\\").join("\\\\");

                    return "input_to_now('" + a + "', " + b + ")";
                };

                cs_interface.evalScript(input_function(v.org_path, input_sort), function (result) { });
                cs_interface.evalScript(input_function(v.vc2_path, input_vc_sort), function (result) { });
            });
        };
    </script>
</body>
</html>
