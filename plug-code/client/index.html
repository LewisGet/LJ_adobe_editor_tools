<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>LJ subtitle</title>
</head>
<body>
    <h1>使用說明</h1>

    <p>
        <!-- todo: 補上說明內容 -->
        something text in here.
    </p>

    <button id="clone-lewis">lewis</button>
    <button id="clone-kevin">kevin</button>
    <button id="clone-gold">gold</button>

    <p>
        複製位置 <input type="text" id="clone-else-1" /> <button id="clone-else-1">else</button>
    </p>

    <p>
        Audio truck sort <input type="text" id="audio-truck-sort" />
    </p>

    <p id="api_server_test">
    </p>
    
    <button onclick="window.start_record()">start record</button>
    <button onclick="window.stop_record()">stop record</button>

    <script type="text/javascript" src="CSInterface.js"></script>
    <script type="text/javascript" src="index.js"></script>
    <script type="text/javascript">
        window.get_request = function (url, execute_function) {
            http = new window.XMLHttpRequest();
            http.overrideMimeType("text/json");
            http.open('GET', url, true);
            http.send();

            http.onreadystatechange = function () {
                try {
                    execute_function(http.responseText);
                } catch (e) { }
            };
        };

        window.start_record = function () {
            window.get_request("http://127.0.0.1:8000/?start_record", function (r) {
                window.api_server_test.innerText = JSON.parse(r).message;
            });
        };

        window.stop_record = function () {
            window.get_request("http://127.0.0.1:8000/?stop_record", function (r) {
                var v = JSON.parse(r);

                window.api_server_test.innerText = v.message;

                cs_interface.evalScript("input_to_now('" + v.org_path.replace("\\.\\", "\\").split("\\").join("\\\\") + "', 1)", function (result) { });
                cs_interface.evalScript("input_to_now('" + v.vc2_path.replace("\\.\\", "\\").split("\\").join("\\\\") + "', 0)", function (result) { });
            });
        };
    </script>
</body>
</html>
